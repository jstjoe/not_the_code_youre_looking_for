var zd = require('../lib/client'),
	fs = require('fs');

var client = zd.createClient({
	username: 'eriks@circle.com',
	token: process.env.ZENDESK_TOKEN,
	remoteUri: 'https://support.circle.com/api/v2/help_center',
	helpcenter: true
});

var client1 = zd.createClient({
  username: 'service-zendesk-cx@circle.com',
  token: '0sSsYcTBJTWKfkzcEhSS3N2uPXklYyUNk81ZGw0L',
  remoteUri: 'https://support.circle.com/api/v2'
});

// var client2 = zd.createClient({
// 	username: 'eriks@circle.com',
// 	token: process.env.ZENDESK_TOKEN,
// 	remoteUri: 'https://support.circle.com/api/v2/channels/voice',
// 	voice: true
// });

client1.macros.list(function(err, res, results) {
  if (err) {
    console.log(err);
  } else if (typeof results === 'undefined') {
	console.log('Empty!');
  } else {
  	var a = [];
    results = results.filter(function(element) {
      if (element.restriction === null) {
      	// console.log(element);
      }
      if (element.restriction !== null && (element.restriction.id === 20762524)) {
      	a.push(element.title); 
      }

      if (element.title === '[RA] - #RCO: Suspended job - Using a Proxy') {
      	console.log(element);
      }
    });
    // console.log(a);
  }
});

// client1.groups.list(function(err, res, results) {
//   if (err) {
//     console.log(err);
//   } else if (typeof results === 'undefined') {
// 	console.log('Empty!');
//   } else {
// 	console.log(results);
//   }
// });

/*

Checked
- applyTicket
- apply
- agentactivity
- views

Errors (not using in Support Web thought)
- rate limit issue needs to be taken into account

- export
- exportSample

https://support.circle.com/agent/admin/macros/edit/36632884
90221

*/

// client2.currentqueueactivity.show(function(err, req, results) {
// 	console.log(results);
// });